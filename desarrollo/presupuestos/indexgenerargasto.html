<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Sistema ERP</title>
 
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">
    <!-- Google web font "Open Sans" -->
    <link rel="stylesheet" href="css/fontawesome-all.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/magnific-popup.css" />
    <link rel="stylesheet" type="text/css" href="slick/slick.css" />
    <link rel="stylesheet" type="text/css" href="slick/slick-theme.css" />
    <link rel="stylesheet" href="css/tooplate-style.css">

    <script>
        var renderPage = true;

        if (navigator.userAgent.indexOf('MSIE') !== -1
            || navigator.appVersion.indexOf('Trident/') > 0) {
            /* Microsoft Internet Explorer detected in. */
            alert("Please view this in a modern browser such as Chrome or Microsoft Edge.");
            renderPage = false;
        }
    </script>
</head>

<script type="text/javascript">
    function mostrar(id) {
        const cero = 0;
        if (id == "descuentoP") {
            $("#descuentoPo").show();
            $("#descuentoDi").hide();

            $('#descuentoDinero').val(cero);
            $('#montoFactura').val(cero);
        }

        if (id == "descuentoD") { 
            $("#descuentoPo").hide();
            $("#descuentoDi").show(); 

            $('#descuentoPorcentaje').val(cero);
        }

        if (id == "sinDescuento") {
            $("#descuentoPo").hide();
            $("#descuentoDi").hide();

            $('#descuentoPorcentaje').val(cero);
            $('#descuentoDinero').val(cero);
            $('#montoFactura').val(cero);
        }
        }
        </script>


<body>
    <!-- Loader -->
    <div id="loader-wrapper">
        <div id="loader"></div>
        <div class="loader-section section-left"></div>
        <div class="loader-section section-right"></div>
    </div>

    <!-- Page Content -->
    <div class="container-fluid tm-main">
        <div class="row tm-main-row">

            <!-- Sidebar -->
        <div id="tmSideBar" class="col-xl-3 col-lg-4 col-md-12 col-sm-12 sidebar">
            <button onClick="parent.location='../index.html'" class="volverButton"><img src="img/volver.png "
                width="50px" /></button>
        <div class="classConfi">
            <button onClick="parent.location='confi.html'" class="confiButton"><img src="img/confi.png "
                    width="60px" /></button>
        </div>
            <button id="tmMainNavToggle" class="menu-icon">&#9776;</button>
        
            <div class="inner">
                <nav id="tmMainNav" class="tm-main-nav">
                    <ul>
                        <li>
                            <a onClick="parent.location='index.html'" href="index.html" id="tmNavLink1" class="scrolly  "
                                data-bg-img="constructive_bg_04.jpg" data-page="#tm-section-1">
                                <i class="fa fa-database tm-nav-fa-icon"></i>
                                <span>Proyectos</span>
                            </a>
                        </li>
                        <li>
                            <a onClick="parent.location='indexpresupuesto.html'" href="indexpresupuesto.html" id="tmNavLink2"
                                class="scrolly " data-bg-img="constructive_bg_02.jpg" data-page="#tm-section-2"
                                data-page-type="carousel">
                                <i class="fas fa-map tm-nav-fa-icon"></i>
                                <span>Presupuestos</span>
        
                            </a>
                        </li>
                        <li>
                            <a onClick="parent.location='indexproveedores.html'" href="#contact" class="scrolly"
                                data-bg-img="constructive_bg_04.jpg" data-page="#tm-section-4">
                                <i class="fa fa-address-book tm-nav-fa-icon"></i>
                                <span>Proveedores</span>
                            </a>
                        </li>
                        
                        <li>
                            <a onClick="parent.location='indexpagos.html'" href="#contact" class="scrolly"
                                data-bg-img="constructive_bg_04.jpg" data-page="#tm-section-4">
                                <i class="fa fa-credit-card tm-nav-fa-icon"></i>
                                <span>Pagos</span>
                            </a>
                        </li>
                        <li>
                            <a onClick="parent.location='inventario.html'" href="inventario.html" id="tmNavLink1" class="scrolly" data-bg-img="constructive_bg_01.jpg" data-page="#tm-section-1">
                                <i class="fa fa-database tm-nav-fa-icon"></i>
                                <span>Inventario</span>
                            </a>
                        </li>
        
        
                    </ul>
                </nav>
            </div>
        </div>

            <div class=" tm-content">

                <!-- section 2 -->
                <section id="tm-section-2" class="">

                    <div class="tm-bg-transparent-black tm-contact-box-pad">
                        <br><br><br>
                        <a class="btn tm-btn tm-font-big" id="btnDescuento" class="btn btn-info" data-toggle="tooltip"
                            title="Nuevo Producto">
                            Generar Gasto +
                        </a>
                    

<div class="modal fade" id="modalDescuento" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header bg-primary text-light">
                <h5 class="modal-title" id="exampleModalLabel">Escoge el descuento que quieres asignar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span>
                </button>
            </div>
            <form id="descuentoForm">
                <div class="modal-body">

                    <div class="form-group">

                    <select id="tipoDescuento" type="text" class="form-control" onChange="mostrar(this.value);" required>
                        <option value="sinDescuento" selected>Sin descuento</option>
                        <option value="descuentoP">Descuento en porcentaje</option>
                        <option value="descuentoD">Descuento de dinero</option>
                    </select>
                    </div>
                    
                    <div id="descuentoPo" style="display: none;" class="form-group">
                    
                        <label>Descuento en Porcentaje</label>
                        <input id="descuentoPorcentaje" type="number"   step="0.01" class="form-control" required>
                    </div>
                    
                    <div id="descuentoDi" style="display: none;" class="form-group">
                        <h5 class="modal-title" id="exampleModalLabel">Descuento en Dinero
                        </h5>
                        <label>Ingresar monto de la factura</label>
                        <input id="montoFactura" type="number" step="0.01" class="form-control" required>

                        <label>Ingresar monto del descuento</label>
                        <input id="descuentoDinero" type="number" step="0.01" class="form-control" required>
                        
                    </div>
            
             
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" tabindex="2">Cancelar</button>
                    <button type="submit" id="btnNuevo" class="btn btn-primary" translate="1">Ingresar línea de gasto</button>
                </div>
                </div>
            </form>
        </div>
    </div>
</div>

                    <div class="modal fade" style="overflow-y: scroll;" id="modalAltaEdicion" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header bg-primary text-light">
                                    <h5 class="modal-title" id="exampleModalLabel">Agregar Gastos</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <form id="Agregar">
                                    <div class="modal-body">
                                        <input id="id" type="hidden"> <!-- ID que vamos a recibir de firebase -->
                                        <div class="form-group">
                                            <label>Código</label>
                                            <select id="codigo" type="text" class="form-control" required></select>
                                        </div>
                                        <div class="form-group">
                                            <label>Pep</label>
                                            <select name="pep" id="pep" onchange="cargarPueblos();" type="text" class="form-control"
                                                required>
                                                <option value="">Seleccione un Pep...</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label>Cuenta</label>
                                            <select name="cuenta" id="cuenta" type="text" class="form-control" required>
                                                <option value="">Seleccione una Cuenta...</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label>Cantidad de Producto</label>
                                            <input id="gasto" type="text" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Descripcion del gasto</label>
                                            <input id="descripcion" type="text" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Precio total de producto</label>
                                            <input id="cantidad" type="number" step="0.01" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Número de Factura</label>
                                            <input id="factura" type="text" class="form-control" required></input>
                                        </div>
                                        <div class="form-group">
                                            <label>Proveedor</label>
                                            <select id="proveedor" type="text" class="form-control" required></select>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal" tabindex="2">Cancelar</button>
                                        <button type="submit" value="btnGuardar" class="btn btn-primary" translate="1">Siguiente</button>
                                        <button type="submit" value="btnGuardar" id="btnTerminar" class="btn btn-primary" translate="1">Terminar</button>
                                        
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="modalEditar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header bg-primary text-light">
                                    <h5 class="modal-title" id="exampleModalLabel">Editar Línea de Gasto</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <form id="Editar">
                                    <div class="modal-body">
                                        <input id="idEdit" type="hidden"> <!-- ID que vamos a recibir de firebase -->
                                        <div class="form-group">
                                            <label>Código</label>
                                            <input id="codigoEdit" type="text"  disabled>
                                        </div>
                                        <div class="form-group">
                                            <label>Pep</label>
                                            <input name="pep" id="pepEdit" type="text" 
                                                disabled>
                                        </div>
                                        <div class="form-group">
                                            <label>Cuenta</label>
                                            <input name="cuenta" id="cuentaEdit" type="text"  disabled>
                                               
                                        </div>
                                        <div class="form-group">
                                            <label>Cantidad de Producto</label>
                                            <input id="gastoEdit" type="text" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Descripcion del gasto</label>
                                            <input id="descripcionEdit" type="text" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Precio total de producto</label>
                                            <input id="cantidadEdit" type="number" step="0.01" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Número de Factura</label>
                                            <input id="facturaEdit" type="text" class="form-control" required></input>
                                        </div>
                                        <div class="form-group">
                                            <label>Proveedor</label>
                                            <select id="proveedorEdit" type="text" class="form-control" required></select>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal" tabindex="2">Cancelar</button>
                                        <button type="submit" value="btnGuardar"  class="btn btn-primary"
                                            translate="1">Guardar Cambio</button>
                    
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="modal fade" id="modalIntercambiar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header bg-primary text-light">
                                    <h5 class="modal-title" id="exampleModalLabel">Cambiar Cuenta de Línea de Gasto</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <form id="Intercambiar">
                                    <div class="modal-body">
                                        <input id="idInter" type="hidden"> <!-- ID que vamos a recibir de firebase -->
                                        <label>Detalles del Gasto</label>
                                        <div class="form-group">
                                            
                                            <label>Código</label>
                                            <input id="codigoInter" type="text"  class="form-disabled" disabled>
                                        </div>
                                        <div class="form-group">
                                            <label>Pep</label>
                                            <input name="pep" id="pepInter" type="text" 
                                            class="form-disabled" disabled>
                                        </div>
                                        <div class="form-group">
                                            <label>Cuenta</label>
                                            <input name="cuenta" id="cuentaInter" type="text"  class="form-disabled" disabled>
                                               
                                        </div>
                                        <div class="form-group">
                                            <label>Cantidad de Producto</label>
                                            <input id="gastoInter" type="text" class="form-disabled" disabled>
                                        </div>
                                        <div class="form-group">
                                            <label>Descripcion del gasto</label>
                                            <input id="descripcionInter" type="text" class="form-disabled" disabled>
                                        </div>
                                        <div class="form-group">
                                            <label>Precio total de producto</label>
                                            <input id="cantidadInter" type="number" step="0.01" class="form-disabled" disabled>
                                        </div>
                                        <div class="form-group">
                                            <label>Número de Factura</label>
                                            <input id="facturaInter" type="text" class="form-disabled" disabled></input>
                                        </div>
                                        <div class="form-group">
                                            <label>Proveedor</label>
                                            <input id="proveedorInter" type="text" class="form-disabled" disabled></input>
                                        </div>

                                        <label>Proyecto Destinatario</label>
                                        <div class="form-group">
                                            <label>Proyecto</label>
                                            <select id="codigoEnviar" type="text" class="form-control" required></select>
                                        </div>
                                        <div class="form-group">
                                            <label>Pep</label>
                                            <select  name="pepEnviar" id="pepEnviar"  onchange="cargarCuentas();" type="text" class="form-control" required></select>
                                        </div>
                                        <div class="form-group">
                                            <label>Cuenta</label>
                                            <select  name="cuentaEnviar" id="cuentaEnviar" type="text" class="form-control" required></select>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal" tabindex="2">Cancelar</button>
                                        <button type="submit" value="btnIntercambiar"  class="btn btn-primary"
                                            translate="1">Guardar Cambio</button>
                    
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="modal fade" id="modalTerminarFactura" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header bg-primary text-light">
                                    <h5 class="modal-title" id="exampleModalLabel">Agregar Gastos</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">&times;</span>
                                    </button>
                                    
                                </div>
                                <div class="modal-body">
                                <div class="form-group">
                                    <label>Sumatoria de Líneas</label>
                                    <input id="gastoAcumulado" type="text" class="form-control" disabled></input>
                                </div>
                                <br>
                                <div class="form-group">
                                    <label>GASTO CON DESCUENTO</label>
                                    <input id="gastoAcumuladoDescuento" value="₡0" type="text" class="form-control" disabled></input>
                                </div>
                                <div class="form-group">
                                    <label>GASTO CON IVA</label>
                                    <input id="gastoAcumuladoIva" value="₡0" type="text" class="form-control" disabled></input>
                                </div>

                                <div class="form-group">
                                    <label>GASTO CON IVA Y DESCUENTO</label>
                                    <input id="gastoAcumuladoIvaDescuento" value="₡0" type="text" class="form-control" disabled></input>
                                </div>

                                <button type="button" class="btn btn-secondary" data-dismiss="modal" tabindex="2">Cerrar</button>
                             </div>
                            </div>
                         </div>
                  </div>

                  <div class="form-group">
                    <select id="pActual" onchange="asignarProyecto();" type="text" class="btn tm-btn-submit ml-auto">
                
                        <option value="" >Seleccione un proyecto</option>
                
                    </select>
                </div>

                <div class="form-group">
                    
                <select  name="pepEnviar2" id="pepEnviar2"  onchange="cargarCuentas2();" type="text" class="btn tm-btn-submit ml-auto" required>
                    <option value="" >Seleccione un pep</option>
                </select>
                </div>
                <div class="form-group">
                    
                    <select  name="cuentaEnviar2" id="cuentaEnviar2" onchange="asignarCuenta();" type="text" class="btn tm-btn-submit ml-auto" required>
                        <option value="" >Seleccione una cuenta</option>
                    </select>
                </div>
                    <table id="tablaProductos" class="table table-striped table-bordered" style="width:100%">
                        <thead class="text-center">
                            <tr>
                                <th>ID</th>
                                <th>Proyecto</th>
                                <th>_____Pep_____</th>
                                <th>Cuenta</th>
                                <th>Cantidad de producto</th>
                                <th>Descripcion del gasto</th>
                                <th>Precio total de producto</th>
                                <th>Proveedor</th>
                                <th>Número de Factura</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table> 
                    </div>
                </section>

              
            </div> <!-- .tm-content -->
            <footer class="footer-link">
            <p class="tm-copyright-text">Copyright &copy; 2021 ConstruID.
            
                - Sistema ERP</p>
            </footer>
        </div> <!-- row -->
    </div>
    <div id="preload-01"></div>
    <div id="preload-02"></div>
    <div id="preload-03"></div>
    <div id="preload-04"></div>

    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/jquery.magnific-popup.min.js"></script>
    <script type="text/javascript" src="js/jquery.backstretch.min.js"></script>
    <script type="text/javascript" src="slick/slick.min.js"></script> <!-- Slick Carousel -->
 




    <script src="https://www.gstatic.com/firebasejs/7.14.6/firebase.js"></script>

    <!-- datatables -->
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9.14.2/dist/sweetalert2.all.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-auth.js"></script>
<script type="text/javascript" src="pruebagasto.js"></script>


<script>  

    function asignarProyecto() {

            db.ref("moneda").update({
                pActual: $.trim($('#pActual').val()),

            });
          
        }

        function asignarPep() {

db.ref("moneda").update({
    pepActual: $.trim($('#pepEnviar2').val()),

});
location.reload();
}

function asignarCuenta() {
    let pep = $.trim($('#pepEnviar2').val());
    let cuentaEnviar = $.trim($('#cuentaEnviar2').val());
    if (pep == "pep01") {
            pep = "Pep 21X-01-C";
        } else
            if (pep == "pep02") {
                pep = "Pep 21X-02-C";
            } else
                if (pep == "pep03") {
                    pep = "Pep 21X-03-C";
                } else
                    if (pep == "pep04") {
                        pep = "Pep 21X-04-C";
                    } else
                        if (pep == "pep05") {
                            pep = "Pep 21X-05-C";
                        } else
                            if (pep == "pep06") {
                                pep = "Pep 21X-06-C";
                            } else
                                if (pep == "pep07") {
                                    pep = "Pep 21X-07-C";
                                } else
                                    if (pep == "pep08") {
                                        pep = "Pep 21X-08-C";
                                    } else
                                        if (pep == "pep09") {
                                            pep = "Pep 21X-09-C";
                                        } else
                                            if (pep == "pep10") {
                                                pep = "Pep 21X-10-C";
                                            } else
                                                if (pep == "pep11") {
                                                    pep = "Pep 21X-11-C";
                                                } else
                                                    if (pep == "pep12") {
                                                        pep = "Pep 21X-12-C";
                                                    } else
                                                        if (pep == "pep13") {
                                                            pep = "Pep 21X-13-C";
                                                        } else
                                                            if (pep == "pep14") {
                                                                pep = "Pep 21X-14-C";
                                                            } else
                                                                if (pep == "pep15") {
                                                                    pep = "Pep 21X-15-C";
                                                                } else
                                                                    if (pep == "pep16") {
                                                                        pep = "Pep 21X-16-C";
                                                                    } else
                                                                        if (pep == "pep17") {
                                                                            pep = "Pep 21X-17-C";
                                                                        } else
                                                                            if (pep == "pep18") {
                                                                                pep = "Pep 21X-18-C";
                                                                            } else
                                                                                if (pep == "pep19") {
                                                                                    pep = "Pep 21X-19-C";
                                                                                } else
                                                                                    if (pep == "pep20") {
                                                                                        pep = "Pep 21X-20-C";
                                                                                    } else
                                                                                        if (pep == "pep21") {
                                                                                            pep = "Pep 21X-21-C";
                                                                                        } else
                                                                                            if (pep == "pep22") {
                                                                                                pep = "Pep 21X-2-C";
                                                                                            } else
                                                                                                if (pep == "pep23") {
                                                                                                    pep = "Pep 21X-23-C";
                                                                                                } else
                                                                                                    if (pep == "pep24") {
                                                                                                        pep = "Pep 21X-24-C";
                                                                                                    } else
                                                                                                        if (pep == "pep25") {
                                                                                                            pep = "Pep 21X-25-C";
                                                                                                        } else
                                                                                                            if (pep == "pep26") {
                                                                                                                pep = "Pep 21X-26-C";
      
        console.log(cuentaEnviar);                                                                               }
        cuenta = cuentaEnviar.slice(13, -1);
db.ref("moneda").update({
    pepActual: pep,
    cuentaActual: cuenta,

});
location.reload();
}
</script>
    <script>

        var sidebarVisible = false;
        var currentPageID = "#tm-section-2";

        // Setup Carousel
        function setupCarousel() {

            // If current page isn't Carousel page, don't do anything.
            if ($('#tm-section-2').css('display') == "none") {
            }
            else {	// If current page is Carousel page, set up the Carousel.

                var slider = $('.tm-img-slider');
                var windowWidth = $(window).width();

                if (slider.hasClass('slick-initialized')) {
                    slider.slick('destroy');
                }

                if (windowWidth < 640) {
                    slider.slick({
                        dots: true,
                        infinite: false,
                        slidesToShow: 1,
                        slidesToScroll: 1
                    });
                }
                else if (windowWidth < 992) {
                    slider.slick({
                        dots: true,
                        infinite: false,
                        slidesToShow: 2,
                        slidesToScroll: 1
                    });
                }
                else {
                    // Slick carousel
                    slider.slick({
                        dots: true,
                        infinite: false,
                        slidesToShow: 3,
                        slidesToScroll: 2
                    });
                }

                // Init Magnific Popup
                $('.tm-img-slider').magnificPopup({
                    delegate: 'a', // child items selector, by clicking on it popup will open
                    type: 'image',
                    gallery: { enabled: true }
                    // other options
                });
            }
        }

        // Setup Nav
        function setupNav() {
            // Add Event Listener to each Nav item
            $(".tm-main-nav a").click(function (e) {
                e.preventDefault();

                var currentNavItem = $(this);
                changePage(currentNavItem);

                setupCarousel();
                setupFooter();

                // Hide the nav on mobile
                $("#tmSideBar").removeClass("show");
            });
        }

        function changePage(currentNavItem) {
            // Update Nav items
            $(".tm-main-nav a").removeClass("active");
            currentNavItem.addClass("active");

            $(currentPageID).hide();

            // Show current page
            currentPageID = currentNavItem.data("page");
            $(currentPageID).fadeIn(1000);

            // Change background image
            var bgImg = currentNavItem.data("bgImg");
            $.backstretch("img/" + bgImg);
        }

        // Setup Nav Toggle Button
        function setupNavToggle() {

            $("#tmMainNavToggle").on("click", function () {
                $(".sidebar").toggleClass("show");
            });
        }

        // If there is enough room, stick the footer at the bottom of page content.
        // If not, place it after the page content
        function setupFooter() {

            var padding = 100;
            var footerPadding = 40;
            var mainContent = $("section" + currentPageID);
            var mainContentHeight = mainContent.outerHeight(true);
            var footer = $(".footer-link");
            var footerHeight = footer.outerHeight(true);
            var totalPageHeight = mainContentHeight + footerHeight + footerPadding + padding;
            var windowHeight = $(window).height();

            if (totalPageHeight > windowHeight) {
                $(".tm-content").css("margin-bottom", footerHeight + footerPadding + "px");
                footer.css("bottom", footerHeight + "px");
            }
            else {
                $(".tm-content").css("margin-bottom", "0");
                footer.css("bottom", "20px");
            }
        }

        // Everything is loaded including images.
        $(window).on("load", function () {

            // Render the page on modern browser only.
            if (renderPage) {
                // Remove loader
                $('body').addClass('loaded');

                // Page transition
                var allPages = $(".tm-section");

                // Handle click of "Continue", which changes to next page
                // The link contains data-nav-link attribute, which holds the nav item ID
                // Nav item ID is then used to access and trigger click on the corresponding nav item
                var linkToAnotherPage = $("a.tm-btn[data-nav-link]");

                if (linkToAnotherPage != null) {

                    linkToAnotherPage.on("click", function () {
                        var navItemToHighlight = linkToAnotherPage.data("navLink");
                        $("a" + navItemToHighlight).click();
                    });
                }

                // Hide all pages
                allPages.hide();

                $("#tm-section-2").fadeIn();

                // Set up background first page
                var bgImg = $("#tmNavLink1").data("bgImg");

                $.backstretch("img/" + bgImg, { fade: 500 });

                // Setup Carousel, Nav, and Nav Toggle
                setupCarousel();
                setupNav();
                setupNavToggle();
                setupFooter();

                // Resize Carousel upon window resize
                $(window).resize(function () {
                    setupCarousel();
                    setupFooter();
                });
            }
        });

    </script>
 
</body>

</html>